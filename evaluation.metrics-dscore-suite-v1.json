{"version":3,"kind":"Notebook","sha256":"32333cd380286a29dc0c09dae33e42288222b969ccfa622d329066d2e4917d6c","slug":"evaluation.metrics-dscore-suite-v1","location":"/evaluation/Metrics_DScore_Suite_v1.ipynb","dependencies":[],"frontmatter":{"title":"D-Score Suite (v1) Benchmark","content_includes_title":false,"github":"https://github.com/hytest-org/hytest","copyright":"2023","numbering":{"title":{"offset":2}},"source_url":"https://github.com/hytest-org/hytest/blob/main/evaluation/Metrics_DScore_Suite_v1.ipynb","edit_url":"https://github.com/hytest-org/hytest/edit/main/evaluation/Metrics_DScore_Suite_v1.ipynb","exports":[{"format":"ipynb","filename":"Metrics_DScore_Suite_v1.ipynb","url":"/hytest//build/Metrics_DScore_Suite-db27cc1f874d62e100870379bc1a236a.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This notebook implements the D-Score metrics from ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Av9oyDuUUF"},{"type":"cite","url":"https://doi.org/10.1029/2021MS002681","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Hodson et al., 2021","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ejEQIoSLUk"}],"kind":"narrative","label":"Hodson_2021","identifier":"https://doi.org/10.1029/2021MS002681","enumerator":"1","key":"ecOfaDrBTQ"},{"type":"text","value":", which decompose mean squared error into orthogonal metrics like bias and variance.  This notebook briefly describes each decomposition along with providing Python implementations.  This notebook can be sourced into analysis notebooks to retrieve access to these functions. See ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ue2TPF9XhQ"},{"type":"link","url":"/evaluation/tutorials/stats-demos/usage-dscore-suite-v1","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"D-Score Usage","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PKCIMdDkqF"}],"urlSource":"./tutorials/stats_demos/Usage_DScore_Suite_v1.ipynb","dataUrl":"/evaluation.tutorials.stats-demos.usage-dscore-suite-v1.json","internal":true,"protocol":"file","key":"URlkvV3q8L"},{"type":"text","value":" for an example of using these functions with a demonstration dataset.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SPRKgWKdJt"}],"key":"SCgC485sYK"},{"type":"table","position":{"start":{"line":3,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Decomposition Name","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xil3yGdSaj"}],"key":"coIppzRO4V"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Metric","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ki479FMCLq"}],"key":"KkLa8aCv46"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Description","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZnI1LVJSJC"}],"key":"QlPCphtPGu"}],"key":"HIyXlgRVtj"},{"type":"tableRow","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Top-level Error Metric","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FBMji0DV9N"}],"key":"lOYeAUPx2P"},{"type":"tableCell","align":"left","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"mse","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kzXoGdlq9F"}],"key":"K60es6mhOL"},{"type":"tableCell","align":"left","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Mean Squared Error; error metric that is decomposed into sets of decompositions below.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"sxygmkldWY"}],"key":"oykBJCmLO3"}],"key":"SFwAvuZAtV"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Bias-Variance","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"b7mvnd6HSi"}],"key":"WmLzMEpDNh"},{"type":"tableCell","align":"left","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"e_bias (Bias)","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cRa8frensC"}],"key":"qIZJVB6oij"},{"type":"tableCell","align":"left","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Bias corresponds to error in the expected magnitude","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Vyr0rPL38h"}],"key":"qATPSmJikb"}],"key":"q2A1Kp6YUS"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Bias-Variance","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"qylTIg7HMs"}],"key":"qgaa0OR3sd"},{"type":"tableCell","align":"left","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"e_variance (Variance)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"KHxun4SSN1"}],"key":"rWPPm2FpgM"},{"type":"tableCell","align":"left","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Variance corresponds to errors in distribution and timing","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"dtJlJgElsO"}],"key":"EaI5AiXusi"}],"key":"SY8OhzIv1q"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Bias, Distribution, Sequence","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"xHZDniEFxD"}],"key":"M5kchUfatc"},{"type":"tableCell","align":"left","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"e_bias (Bias)","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"OseBOAqbwo"}],"key":"Ak3ZVEXvW9"},{"type":"tableCell","align":"left","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Bias corresponds to error in magnitudes","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"PqyGM2hmqx"}],"key":"uMQecl19yF"}],"key":"HUASlKDfLz"},{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Bias, Distribution, Sequence","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"a0WmEFpPfR"}],"key":"V015hV1WMy"},{"type":"tableCell","align":"left","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"e_dist (Distribution)","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"yDkSU1BGvN"}],"key":"gUW5qqivCv"},{"type":"tableCell","align":"left","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Distribution corresponds to distributional error independent of timing","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"iyWveTdVdx"}],"key":"iHckO9lLZS"}],"key":"sLKXrPF7Gz"},{"type":"tableRow","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Bias, Distribution, Sequence","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Uv7YMyIaYX"}],"key":"uSBv1ZkvQ8"},{"type":"tableCell","align":"left","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"e_seq (Sequence)","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"r5CetX84l7"}],"key":"Gz3rEPb6TZ"},{"type":"tableCell","align":"left","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Sequence related to error in ordering of values, timing","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"SsDmOF7WDi"}],"key":"uAXiQ6x1uI"}],"key":"gT8fPREiqK"},{"type":"tableRow","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Trend, Seasonality, Residual Variability","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"OpSNl1LOJu"}],"key":"x6CtxpCIeH"},{"type":"tableCell","align":"left","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"trend","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"tFidqweaX5"}],"key":"LjbEZLV9rw"},{"type":"tableCell","align":"left","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Error related to overall trend","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"s3fXKXfWxc"}],"key":"Wj3oSrEM1z"}],"key":"g8HkEuZvsJ"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Trend, Seasonality, Residual Variability","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"LXKswiLrhV"}],"key":"uBioeI8Xzn"},{"type":"tableCell","align":"left","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"seasonality","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"H6JPXgsuxz"}],"key":"DY2y0bUO94"},{"type":"tableCell","align":"left","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Error related to shifts in seasonality such as phase and amplitude variation","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"eu6BFGSaFQ"}],"key":"BHYQNRlAWW"}],"key":"rBILPqA6Pm"},{"type":"tableRow","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Trend, Seasonality, Residual Variability","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"qcL8z9g4ds"}],"key":"QpQEjJ3ouX"},{"type":"tableCell","align":"left","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"residual","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"fnpuaoU4WP"}],"key":"BNsgQQOYa0"},{"type":"tableCell","align":"left","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Remainder error, not attributed to anything in particular but still exists","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"UCwOX0hHyd"}],"key":"ZUFUMmlrwA"}],"key":"BiweIG3gm9"},{"type":"tableRow","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Seasonal","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"WGu9gecILX"}],"key":"xMgBcrpdqJ"},{"type":"tableCell","align":"left","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"winter","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"mN9bNLbrta"}],"key":"JqEmklHc8x"},{"type":"tableCell","align":"left","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Northern Hemisphere Seasons","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"iFRcmpYUDl"}],"key":"HnEDEptrzQ"},{"type":"text","value":": Dec, Jan, Feb","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"n9v1CFXwIB"}],"key":"PZepNkcq4w"}],"key":"X6496ENcje"},{"type":"tableRow","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Seasonal","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"JhYO3tOuBN"}],"key":"GVYGL48Cb2"},{"type":"tableCell","align":"left","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"spring","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"SHbSmcrgGI"}],"key":"jAmDyIS5SB"},{"type":"tableCell","align":"left","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Northern Hemisphere Seasons","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"SlkE3gSpSs"}],"key":"DBBcdx7gL7"},{"type":"text","value":": Mar, Apr, May","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Rm0lo5FiW3"}],"key":"qwoEwvyRAS"}],"key":"QmNasQVaHH"},{"type":"tableRow","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Seasonal","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"EUWurlRZLA"}],"key":"FqhQseRuU6"},{"type":"tableCell","align":"left","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"summer","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"VwK05buOQM"}],"key":"hgED93oIQ1"},{"type":"tableCell","align":"left","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Northern Hemisphere Seasons","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"NHqh5kTvE3"}],"key":"VXLrcV5bGE"},{"type":"text","value":": Jun, Jul, Aug","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"hysftQd5d5"}],"key":"NsPFQmkusi"}],"key":"Y9ATFmPjfJ"},{"type":"tableRow","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Seasonal","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"L9gGbRqPC2"}],"key":"EQNLPzWawg"},{"type":"tableCell","align":"left","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"fall","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Xg2DfGJ0WW"}],"key":"MayHNEV4Fd"},{"type":"tableCell","align":"left","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Northern Hemisphere Seasons","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"VLo5G23Cf4"}],"key":"o34RNpXCdX"},{"type":"text","value":": Sep, Oct, Nov","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"FXU5jsxi62"}],"key":"B2pmQuv066"}],"key":"wStlTAHktC"},{"type":"tableRow","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Percentile","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"zTBI0vO35b"}],"key":"koYyhMQZ8o"},{"type":"tableCell","align":"left","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"low","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"x29UISpxzT"}],"key":"csNN1pwVkk"},{"type":"tableCell","align":"left","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"5th percentile and lower","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"y0JdYCpSR5"}],"key":"Kz7UsOQrvq"}],"key":"EEbysuuj0N"},{"type":"tableRow","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Percentile","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Djf1QyyAbo"}],"key":"GI5XaWHYIq"},{"type":"tableCell","align":"left","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"below_avg","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"bUMXrPEt9Y"}],"key":"m2lcM387Tc"},{"type":"tableCell","align":"left","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":">25th percentile and <= 50th percentile","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"GnULMN8xWy"}],"key":"tImgx18AYy"}],"key":"gXojOucSF3"},{"type":"tableRow","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Percentile","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"AUpVKVJP7g"}],"key":"pDiYTA9IlT"},{"type":"tableCell","align":"left","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"above_avg","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"qiAgpA2CRM"}],"key":"zl40QuYzxJ"},{"type":"tableCell","align":"left","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":">50th percentile and <= 75th percentile","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"SOGfiKgFIN"}],"key":"b04UW1bbJD"}],"key":"nFLXscqTPx"},{"type":"tableRow","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Percentile","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"XFE2hqRfS3"}],"key":"I8F36YIjz0"},{"type":"tableCell","align":"left","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"high","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"cV59Gsfexl"}],"key":"bYje0S10FL"},{"type":"tableCell","align":"left","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":">75th percentile","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"MveqSsltzX"}],"key":"OAXtnSKfmG"}],"key":"qaPuE0ahh0"}],"key":"FaK9tHQk3l"}],"key":"m4CqQsWWRb"},{"type":"block","kind":"notebook-content","children":[{"type":"blockquote","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Source: These statistics are adapted from the original functions found in ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rShvZYDz71"},{"type":"link","url":"https://github.com/thodson-usgs/dscore","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://​github​.com​/thodson​-usgs​/dscore","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BSwJ4sNYFg"}],"urlSource":"https://github.com/thodson-usgs/dscore","error":true,"key":"RjIAQNcFST"}],"key":"fZdzyXHS0b"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Hodson et al., 2021, Mean Squared Error, Deconstructed. Journal of Advances in Modeling Earth Systems, 13(12), ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qZY8Z1G6qp"},{"type":"cite","url":"https://doi.org/10.1029/2021MS002681","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Hodson ","key":"V2EPv9lJnP"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"QNwDwMoEKi"}],"key":"G6pP5ScM0I"},{"type":"text","value":" (2021)","key":"JWZUxE63g5"}],"kind":"narrative","label":"Hodson_2021","identifier":"https://doi.org/10.1029/2021MS002681","enumerator":"1","key":"ODwpQJosdP"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BMXQosytRa"}],"key":"ybzmhM4wwz"}],"key":"xfnQSVb8Th"}],"key":"xJ7BGGylPq"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Import libraries","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HNBRymjdoT"}],"identifier":"import-libraries","label":"Import libraries","html_id":"import-libraries","implicit":true,"key":"ZA3qU4zwDw"}],"key":"QhORgngfkb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import logging\nimport numpy as np\nimport pandas as pd","key":"OrSvSAqCUj"},{"type":"outputs","id":"MrX1gNfBYaCWfVHjZ1MIY","children":[],"key":"HHGYeSEX9V"}],"key":"sk8cdVbE9h"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Mean Squared Error","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q1V749SH9q"}],"identifier":"mean-squared-error","label":"Mean Squared Error","html_id":"mean-squared-error","implicit":true,"key":"nPvZS2CMSb"}],"key":"V6gmT3lphi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def mse(obs, sim) -> float:\n    \"\"\"\n     Mean Square Error --   Compute MSE over all paired values observed (x) and simulated/modeled (x_hat)\n        .. math::\n            \\\\sum_{i=1}^{n}(x_i - \\\\hat{x}_i)^2\n\n    :return: mean square error\n    :rtype: float\n\n    NOTE: this and all functions below rely upon the obs and sim datatypes implementing \n          certain math methods on themselves.  That is, obs.sum() must be defined by \n          typeof(obs). Pandas Series and DataFrames do this, but other array_like\n          may not.\n    \"\"\"\n    e = obs - sim\n    \n    return (e**2).mean()","key":"BfLezqwoA3"},{"type":"outputs","id":"Ftp-Fa0XZJDEg3djhHQv9","children":[],"key":"WCIqIXtfVY"}],"key":"dlZLac0bZk"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Percent Bias","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rxU7Be4DbX"}],"identifier":"percent-bias","label":"Percent Bias","html_id":"percent-bias","implicit":true,"key":"RArsHujKEm"}],"key":"lhAUBEoZgt"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def pbias(obs, sim) -> float:\n    \"\"\"\n    percent bias -- a measure of the mean tendency of simulated values to be\n    greater than or less than associated observed values.\n\n    Returns:\n        float: calculated percent bias / units = percent (i.e. 90 rather than 0.90)\n    \"\"\"\n    return 100 * (sim - obs).sum() / obs.sum()    ","key":"yFWE39fIIH"},{"type":"outputs","id":"gsK1FJjC7unhULf_QWyiU","children":[],"key":"GGD7DI0jSf"}],"key":"ZDZT8luFfj"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Bias-Variance Decomposition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PA8hRmmvB3"}],"identifier":"bias-variance-decomposition","label":"Bias-Variance Decomposition","html_id":"bias-variance-decomposition","implicit":true,"key":"kQ7j4dLjKG"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"From ‘Bias-Variance Trade-off’. See ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GhV9w1MD2a"},{"type":"cite","url":"http://dx.doi.org/10.1162/neco.1992.4.1.1","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Geman et al., 1992","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"J1sAqW11JR"}],"kind":"narrative","label":"Geman_1992","identifier":"http://dx.doi.org/10.1162/neco.1992.4.1.1","enumerator":"2","key":"wfNF5huo01"},{"type":"text","value":" for more details.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oQkDoE7jZG"}],"key":"hPYzfH7VsZ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Geman et al., 1992, Neural networks and the bias/variance dilemma. Neural Computation, 4(1), 158. ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jBHHlXs1fb"},{"type":"cite","url":"http://dx.doi.org/10.1162/neco.1992.4.1.1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Geman ","key":"h1sTMrLqN3"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"tFBWhZuNmN"}],"key":"GqANmNmIj7"},{"type":"text","value":" (1992)","key":"Js02Yxb1Ke"}],"kind":"narrative","label":"Geman_1992","identifier":"http://dx.doi.org/10.1162/neco.1992.4.1.1","enumerator":"2","key":"Hxucg5ZXMl"}],"key":"tE5FMLHpAq"}],"key":"S3yJjB04qJ"}],"key":"Hzl2MWCA4W"}],"key":"DBuMTpcRG8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def e_bias(obs, sim) -> float:\n    \"\"\"\n    Bias = square of mean error\n\n    Returns:\n        _type_: _description_\n    \"\"\"\n    e = sim - obs\n    return e.mean()**2\n\n\ndef e_variance(obs, sim) -> float:\n    \"\"\"\n    Variance of error\n    \n    Args:\n        obs (pd.Series - like): data representing observed values\n        sim (pd.Series - like): data representing simulated/modeled values\n\n    Returns:\n        float: variance of the error\n    \"\"\"\n    e = sim - obs\n    return e.var(ddof=0) # use the maximum likelihood estimator for the population variance; 1/n * RSS","key":"pPlLXnPypG"},{"type":"outputs","id":"wEcFoeHwXNmQW5PfOGr2M","children":[],"key":"CnpOUjudp2"}],"key":"RVdpo25U2b"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Bias-Distribution-Sequence Decomposition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vi0hC3CKy9"}],"identifier":"bias-distribution-sequence-decomposition","label":"Bias-Distribution-Sequence Decomposition","html_id":"bias-distribution-sequence-decomposition","implicit":true,"key":"koW7DuyOXl"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Hodson et al., 2021, Mean Squared Error, Deconstructed. Journal of Advances in Modeling Earth Systems, 13(12), ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"uPzdCWaBK5"},{"type":"cite","url":"https://doi.org/10.1029/2021MS002681","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Hodson ","key":"Fx6UGQVo30"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"NUywCMfBgI"}],"key":"MWcBt5S7WF"},{"type":"text","value":" (2021)","key":"YZnPSh70Kw"}],"kind":"narrative","label":"Hodson_2021","identifier":"https://doi.org/10.1029/2021MS002681","enumerator":"1","key":"RS3Sc6lzal"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"L9eHzZf0mP"}],"key":"yebnazK2Zv"}],"key":"AO5eYXKRt5"}],"key":"y8saQE360f"}],"key":"guMHf5cV7z"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def bias_distribution_sequence(obs, sim) -> float:\n    \"\"\"\n    Decomposition into bias, distribution, sequence\n\n    Args:\n        obs (pd.Series - like): data representing observed values\n        sim (pd.Series - like): data representing simulated/modeled values\n\n    Returns:\n        pd.Series: three metrics, indexed by name\n    \"\"\"\n    \n    e = sim - obs\n    s = np.sort(sim) - np.sort(obs)\n    var_s = s.var(ddof=0) # use the maximum likelihood estimator for the population variance; 1/n * RSS\n    var_e = e.var(ddof=0) # use the maximum likelihood estimator for the population variance; 1/n * RSS\n    e_seq = var_e - var_s\n    e_dist = var_s\n    e_bias = e.mean()**2\n    return pd.Series(\n        [e_bias, e_dist, e_seq],\n        index=[\"e_bias\", \"e_dist\", \"e_seq\"])","key":"Ci76Xmn239"},{"type":"outputs","id":"96tk7Q_JO621QHVY6wDFp","children":[],"key":"pLvorwI84y"}],"key":"K6HqKPZFkd"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Trend, Seasonality, Residual Variability Decomposition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rzxqDot0jC"}],"identifier":"trend-seasonality-residual-variability-decomposition","label":"Trend, Seasonality, Residual Variability Decomposition","html_id":"trend-seasonality-residual-variability-decomposition","implicit":true,"key":"JX7kO4EoYa"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The trend, seasonality, and residual variability components are not exactly orthogonal, thus the total percent error for this decomposition will sum to less than 100%. See ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fGHCi7hiAd"},{"type":"link","url":"https://www.wessa.net/download/stl.pdf","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Cleveland et al., 1990","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"XJiUmgPu5f"}],"urlSource":"https://www.wessa.net/download/stl.pdf","key":"MwUWU6Vk4Q"},{"type":"text","value":" and ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"BaOwj28o4e"},{"type":"cite","url":"https://doi.org/10.1029/2021MS002681","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Hodson et al., 2021","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"l3lYPKvZNZ"}],"kind":"narrative","label":"Hodson_2021","identifier":"https://doi.org/10.1029/2021MS002681","enumerator":"1","key":"My3HUZooWz"},{"type":"text","value":" for more information.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"X57eFRp8Qd"}],"key":"KaHIOoZ8a9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Cleveland et al., 1990, STL: A seasonal-trend decomposition procedure based on loess. Journal of Official Statistics, 6(1), 3-73.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"zpqoPgcgu2"}],"key":"hRY7muCns6"}],"key":"jtIRzZxVFr"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Hodson et al., 2021, Mean Squared Error, Deconstructed. Journal of Advances in Modeling Earth Systems, 13(12), ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"SY2Cfax0CJ"},{"type":"cite","url":"https://doi.org/10.1029/2021MS002681","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Hodson ","key":"dYngTeRsee"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"E9aGItKwml"}],"key":"xLG1CNnqXu"},{"type":"text","value":" (2021)","key":"LKtve3wa37"}],"kind":"narrative","label":"Hodson_2021","identifier":"https://doi.org/10.1029/2021MS002681","enumerator":"1","key":"ko4GevnVs3"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"RsaCIyjB41"}],"key":"mvG4vP4D6E"}],"key":"GLSMhaY4hx"}],"key":"wi4B3Bix4L"}],"key":"tzwEPPp3AH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"try:\n    from statsmodels.tsa.seasonal import STL\n    _SEASONAL = True\nexcept ImportError:\n    logging.debug(\"STL library not available.\")\n    _SEASONAL = False\n\ndef stl(obs, sim):\n    \"\"\"\n    Decompose error using STL.\n\n    Seasonal and trend decomposition using Loess (STL).\n    Note that STL is not perfectly orthogonal.\n\n    References\n    ----------\n    .. [1] Cleveland et al., 1990, STL: A seasonal-trend decomposition\n    procedure based on loess. Journal of Official Statistics, 6(1), 3-73.\n    \"\"\"\n    if not _SEASONAL:\n        logging.warning(\"STL statistics not available.\")\n        return None\n    e = sim - obs\n    res = STL(e, period=365, seasonal=9).fit()\n    E = pd.DataFrame(\n        {\n            'trend': res.trend,\n            'seasonality': res.seasonal,\n            'residual': res.resid\n        }\n    )\n    return (E**2).mean()","key":"onURndMjFN"},{"type":"outputs","id":"_PKEKKhuCTjPxvvQcyygU","children":[],"key":"ibXSJDHrAT"}],"key":"EPiLTE0kAO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Seasonal Decomposition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jTrJVe8A7M"}],"identifier":"seasonal-decomposition","label":"Seasonal Decomposition","html_id":"seasonal-decomposition","implicit":true,"key":"vXwcaZqlY6"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Seasonal decomposition uses Northern Hemisphere seasons as a basis, this can be customized below in the function for different seasonal divisions.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fRftfbokCP"}],"key":"tCpBsaxAhN"}],"key":"PNWoDW4hLs"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def seasonal_mse(obs, sim):\n    \"\"\"\n    Decompose error by season.\n\n    Args:\n        obs (pd.Series - like): data representing observed values\n        sim (pd.Series - like): data representing simulated/modeled values\n\n    Both obs and sim should be time-indexed, such that we can pick out months\n    from the time value.\n\n    Returns:\n        pd.Series : mse for 4 major seasons\n    \n    NOTE: 'season' is viewed from a northern-hemisphere perspective\n    \"\"\"\n    e = sim - obs\n    idx = (e.index.month == 12) | (e.index.month <= 2) #Dec, Jan, Feb\n    winter = ((e*idx)**2).mean()\n\n    idx = (e.index.month > 2) & (e.index.month <= 5) #Mar, Apr, May\n    spring = ((e*idx)**2).mean()\n\n    idx = (e.index.month > 5) & (e.index.month <= 8) #Jun, Jul, Aug\n    summer = ((e*idx)**2).mean()\n    \n    idx = (e.index.month > 8) & (e.index.month <= 11) #Sep, Oct, Nov\n    fall = ((e*idx)**2).mean()\n\n    return pd.Series([winter, spring, summer, fall], index=['winter', 'spring', 'summer', 'fall'])","key":"pTjxlxrxRA"},{"type":"outputs","id":"B9NPONy6mFs-b0_8vHJ-G","children":[],"key":"LTylaq9c6E"}],"key":"JUyK8ZUadL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Quantile Decomposition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"N9zYVBhdQ7"}],"identifier":"quantile-decomposition","label":"Quantile Decomposition","html_id":"quantile-decomposition","implicit":true,"key":"MPOnPQvl0d"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"MSE is decomposed by quantile range:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"V790ppXLzU"}],"key":"glgoocmvoh"},{"type":"table","position":{"start":{"line":4,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Q from","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"jOQh0xpV8l"}],"key":"gIMQkdDtiP"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Q to","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"PPBAd8n5lw"}],"key":"bwQTQ716Vb"},{"type":"tableCell","header":true,"align":"left","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Label","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qljZDjLm8o"}],"key":"YKJZrLIyxQ"}],"key":"YZms4F56US"},{"type":"tableRow","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"0.00","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"C9LAGHquFw"}],"key":"szyEVN3w7D"},{"type":"tableCell","align":"left","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"0.25","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"gwlc7QzNYO"}],"key":"ku6G7Sj4Dn"},{"type":"tableCell","align":"left","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Low","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ZC9CxSsK8k"}],"key":"F4A9yVcgWp"}],"key":"sXC3zGyrM1"},{"type":"tableRow","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"0.25","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"wsB5uaWsNL"}],"key":"ctb7EzWXLn"},{"type":"tableCell","align":"left","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"0.50","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"xvY2fkkt9I"}],"key":"xxrstlN9Ko"},{"type":"tableCell","align":"left","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Below-Average","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"x3Q838U60I"}],"key":"dotudNRdRE"}],"key":"JQ16f1X03T"},{"type":"tableRow","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"0.50","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"uz29rG4mlz"}],"key":"C2r6aRDOdQ"},{"type":"tableCell","align":"left","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"0.75","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"bWtH4FadbQ"}],"key":"N4a9cgm8ew"},{"type":"tableCell","align":"left","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Above-Average","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"gEdVmhYLvO"}],"key":"SohG5ttA2h"}],"key":"aA0VuFEqqm"},{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","align":"left","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"0.75","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"uDcrwuf2Gc"}],"key":"RO9RKrv70n"},{"type":"tableCell","align":"left","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"1.00","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"BIoQ5fkz4P"}],"key":"gSdzfFQUkb"},{"type":"tableCell","align":"left","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"High","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ggDTHcZzhg"}],"key":"R3QyjBtFpS"}],"key":"ehOwk8kzub"}],"key":"McnHoSd5r2"}],"key":"eT1TQPC3Jp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def quantile_mse(obs, sim):\n    \"\"\"\n    Decomposes MSE by quantile rangess 0.00-0.25; 0.25-0.5; 0.5-0.75; 0.75-1.00\n\n    Args:\n        obs (pd.Series - like  ): series of observed values\n        sim (_type_): series of simulated/modeled values\n    Both share a common index\n\n    Returns:\n        pd.Series : decomposed MSE, one value per quantile range\n    \"\"\"\n    breaks=[0, 0.25, 0.5, 0.75, 1]\n    labels=['low', 'below_avg', 'above_avg', 'high']\n    e = sim - obs\n    scores = []\n    ranks = obs.rank(method='first')\n    quants = pd.qcut(ranks, q=breaks)\n    for i in range(len(breaks) - 1):\n        quant = e * (quants == quants.cat.categories[i])  # select quantile\n        mse_q = ((quant)**2).mean()\n        scores.append(mse_q)\n    return pd.Series(scores, index=labels)","key":"PBSRJfATOA"},{"type":"outputs","id":"u780WaghGwIcva3IPphMk","children":[],"key":"wmbAuyc62s"}],"key":"gkiVDnExJo"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Scoring Function - ILAMB Scoring","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hh49TFfGk6"}],"identifier":"scoring-function-ilamb-scoring","label":"Scoring Function - ILAMB Scoring","html_id":"scoring-function-ilamb-scoring","implicit":true,"key":"EibgWZHnlT"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Collier et al., 2018, The International Land Model Benchmarking (ILAMB) system: Design, theory, and implementation. Journal of Advances in Modeling Earth Systems, 10(11), ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"B6SIkS55UW"},{"type":"cite","url":"http://dx.doi.org/10.1029/2018ms001354","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Collier ","key":"jg7sXJZNAv"},{"type":"emphasis","children":[{"type":"text","value":"et al.","key":"Pxau3jhniz"}],"key":"zmtGLaVJ9D"},{"type":"text","value":" (2018)","key":"Ru6SXCslDj"}],"kind":"narrative","label":"Collier_2018","identifier":"http://dx.doi.org/10.1029/2018ms001354","enumerator":"3","key":"DYCXbFHnWL"}],"key":"vkyW2emm2D"}],"key":"u76fQjjNV8"}],"key":"hPg6VZdXpT"}],"key":"BbUHeb6VKv"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def score(e, a=1.0):\n    \"\"\"\n    Scores an error\n\n    Exponential scoring function that maps MSE to the unit interval.\n\n    Parameters\n    ----------\n    a : float\n        Positive tuning parameter.\n\n    References\n    ----------\n    .. [1] Collier et al., 2018, The International Land Model Benchmarking\n    (ILAMB) system: Design, theory, and implementation. Journal of Advances\n    in Modeling Earth Systems, 10(11), http://dx.doi.org/10.1029/2018ms001354\n    \"\"\"\n    if a <= 0.0:\n        raise ValueError(\"Tuning parameter must be a positive float\")\n    return np.exp(-1 * a * e)","key":"GTqd3Ay290"},{"type":"outputs","id":"88M73_wIT07EaDm4TU-IL","children":[],"key":"xE5IzsKG7k"}],"key":"HAwF9je0V1"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"ScoreCard Visualizations","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IWxRWx0zk5"}],"identifier":"scorecard-visualizations","label":"ScoreCard Visualizations","html_id":"scorecard-visualizations","implicit":true,"key":"pxjkgMzD0a"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"These routines help with formatting scorecards.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"swxXLxvHM9"}],"key":"TdeOcidO3d"}],"key":"qZ95nUt7E2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\n\ndef ilamb_card_II(df, ax=None, clim=(0,100), cmap='RdYlBu'):\n    axs = ax or plt.gca()\n    try:\n        axs.set_xlabel(df.name)  # note that name is not a standard dataframe attribute.\n    except NameError:\n        pass # Don't set xaxis label name\n        \n    axs.set_ylabel(\"Component\")\n    axs.set_yticks(np.arange(len(df.index)), labels=df.index, fontsize=6)\n    axs.yaxis.set_tick_params(length=0, which='minor')\n\n    axs.set_xticks(np.arange(len(df.columns)), labels=df.columns, fontsize=6, rotation=90, ha='center', va='bottom')\n    axs.xaxis.tick_top()\n    axs.xaxis.set_tick_params(length=0)\n    axs.xaxis.set_label_position('top') \n\n    # Thick black lines between decompositions\n    axs.axhline(y=0.5, color='k') #betwen cells 0 and 1\n    axs.axhline(y=3.5, color='k') # between 3 and 4 \n    axs.axhline(y=6.5, color='k') # between 6 and 7 \n    axs.axhline(y=10.5, color='k') # between 9 and 10\n\n    im = axs.imshow(df, cmap=cmap, vmin=clim[0], vmax=clim[1], alpha=0.80)\n    cbar = axs.figure.colorbar(im, ax=axs, location='bottom', ticks=[0, 50, 100], ticklocation='bottom', pad=0.05, fraction=0.15, shrink=0.5)\n    cbar.ax.tick_params(labelsize=4, width=0.2, length=2, pad=1, labelbottom=True)\n    cbar.outline.set_linewidth(0.2)\n\n    ## Annotates each cell...\n    txtattrs = dict(ha=\"center\", va=\"center\", fontsize=5)\n    i=0\n    for col in df.columns:\n        j=0\n        for row in df.index:\n            text = im.axes.text(i, j, df[col][row], **txtattrs)\n            j+=1\n        i+=1\n    \n    ## Offset minor gridlines.... paint them white. \n    axs.set_yticks(np.arange(len(df.index)+1)-.5, minor=True)\n    axs.set_xticks(np.arange(len(df.columns)+1)-.5, minor=True)\n    axs.grid(which=\"minor\", color=\"w\", linestyle='-', linewidth=0.75)\n    \n    return axs","key":"vTzHgeVzB8"},{"type":"outputs","id":"fy96FSkMV3GTj8Z_D5M1c","children":[],"key":"zPaKQVl4pz"}],"key":"VEs4rK07mE"}],"key":"DBl4W0S3tO"},"references":{"cite":{"order":["Hodson_2021","Geman_1992","Collier_2018"],"data":{"Hodson_2021":{"label":"Hodson_2021","enumerator":"1","doi":"10.1029/2021ms002681","html":"Hodson, T. O., Over, T. M., & Foks, S. S. (2021). Mean Squared Error, Deconstructed. <i>Journal of Advances in Modeling Earth Systems</i>, <i>13</i>(12). <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1029/2021ms002681\">10.1029/2021ms002681</a>","url":"https://doi.org/10.1029/2021ms002681"},"Geman_1992":{"label":"Geman_1992","enumerator":"2","doi":"10.1162/neco.1992.4.1.1","html":"Geman, S., Bienenstock, E., & Doursat, R. (1992). Neural Networks and the Bias/Variance Dilemma. <i>Neural Computation</i>, <i>4</i>(1), 1–58. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1162/neco.1992.4.1.1\">10.1162/neco.1992.4.1.1</a>","url":"https://doi.org/10.1162/neco.1992.4.1.1"},"Collier_2018":{"label":"Collier_2018","enumerator":"3","doi":"10.1029/2018ms001354","html":"Collier, N., Hoffman, F. M., Lawrence, D. M., Keppel‐Aleks, G., Koven, C. D., Riley, W. J., Mu, M., & Randerson, J. T. (2018). The International Land Model Benchmarking (ILAMB) System: Design, Theory, and Implementation. <i>Journal of Advances in Modeling Earth Systems</i>, <i>10</i>(11), 2731–2754. <a target=\"_blank\" rel=\"noreferrer\" href=\"https://doi.org/10.1029/2018ms001354\">10.1029/2018ms001354</a>","url":"https://doi.org/10.1029/2018ms001354"}}}},"footer":{"navigation":{"prev":{"title":"Evaluation Metrics","url":"/evaluation/metrics","group":"Model Evaluation"},"next":{"title":"D-Score Suite (v1) Benchmark -- Usage Examples","url":"/evaluation/tutorials/stats-demos/usage-dscore-suite-v1","group":"Model Evaluation"}}},"domain":"http://localhost:3005"}